@startuml


[*] --> Черновик : Заказ

Черновик --> Оформлен : Выбор услуг/авто

Оформлен --> Оплачен : Успешная оплата
Оформлен --> Отменён : Клиент/кассир отменил

Оплачен --> Выполнен : Мойщик завершил мойку
Оплачен --> Отменён : До начала мойки

Выполнен --> Завершён : Клиент оставил отзыв / Система закрыла заказ

Отменён --> Завершён : Автоматически через 1 час

Завершён --> [*] : Конец

note right of Завершён
  Финальное состояние.
  Все данные переданы в 1С,
  чаевые начислены, рейтинг обновлён.
end note

note left of Оплачен
  Отмена пользователем разрешена 
  только за 30-60 минут
  до входа в бокс!
end note

note left of Выполнен
  Нельзя отменить или вернуться назад.
end note

@enduml
